# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Shared KB –≤ –¥—Ä—É–≥–æ–º –ø—Ä–æ–µ–∫—Ç–µ

**–î–∞—Ç–∞:** 2026-01-08
**–§–∞–π–ª:** T:\Code\shared-knowledge-base\tmp\tmp1.txt
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –±—ã–ª–æ "—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ"

### –ß—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥—É–º–∞–µ—Ç:
> "–º–µ–Ω—è —Å–º—É—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —á—Ç–æ –¥–æ–º–µ–Ω—ã –∑–∞–ø–∏—Å–µ–π –≤—Å–µ –±—ã–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã"

### –ß—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

**‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:** –î–æ–º–µ–Ω—ã –ù–ï –±—ã–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã!

–ü–æ—Å–ª–µ `git checkout v4.0.0` –≤ –ø—Ä–æ–µ–∫—Ç–µ –ø–æ—è–≤–∏–ª–∏—Å—å:
- **–§–∞–π–ª—ã –¥–æ–º–µ–Ω–æ–≤** (docker/, postgresql/, etc.) - —ç—Ç–æ —á–∞—Å—Ç—å Shared KB v4.0
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** (tools/kb_domains.py, etc.) - —ç—Ç–æ —á–∞—Å—Ç—å Shared KB v4.0
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** (CHANGELOG.md, etc.) - —ç—Ç–æ —á–∞—Å—Ç—å Shared KB v4.0

**‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:** –ê–≥–µ–Ω—Ç –ò–ó–ú–ï–ù–ò–õ —Ñ–∞–π–ª –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö `_domain_index.yaml`

–í–æ—Ç —á—Ç–æ –∞–≥–µ–Ω—Ç —Å–¥–µ–ª–∞–ª (—Å—Ç—Ä–æ–∫–∏ 73-276 –≤ —á–∞—Ç–µ):

```diff
# –ë—ã–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑ Shared KB):
domains:
  api: 4
  docker: 11
  postgresql: 8

# –°—Ç–∞–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞):
domains:
  api:
    entries: 4
    token_estimate: 800
    tags: ["rest", "api-design"]
    description: "..."
  docker:
    entries: 11
    token_estimate: 2000
    tags: ["containers", "dockerfile"]
    description: "..."
```

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê 2: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è Shared KB —Ñ–∞–π–ª–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –ß—Ç–æ —Å–¥–µ–ª–∞–ª –∞–≥–µ–Ω—Ç:

**1. –ò–∑–º–µ–Ω–∏–ª `_domain_index.yaml` –≤ –õ–û–ö–ê–õ–¨–ù–û–ô –∫–æ–ø–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞**
   - –§–∞–π–ª: `docs\knowledge-base\shared\_domain_index.yaml`
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è: –î–æ–±–∞–≤–∏–ª 36 —Å—Ç—Ä–æ–∫, —É–¥–∞–ª–∏–ª 12 —Å—Ç—Ä–æ–∫
   - –ü—Ä–æ–±–ª–µ–º–∞: –≠—Ç–æ —Ñ–∞–π–ª –∏–∑ Shared KB submodule!

**2. –î–æ–±–∞–≤–∏–ª –ø–æ–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –ù–ï–¢ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º Shared KB:**
   - `token_estimate` - –Ω–µ—Ç –≤ v4.0.0
   - `tags` - –Ω–µ—Ç –≤ v4.0.0
   - `description` - –Ω–µ—Ç –≤ v4.0.0

**3. –ò—Å–ø—Ä–∞–≤–∏–ª "–æ—à–∏–±–∫—É" –∫–æ—Ç–æ—Ä–æ–π –ù–ï –±—ã–ª–æ:**
   - –ê–≥–µ–Ω—Ç –ø–æ–¥—É–º–∞–ª —á—Ç–æ –ø–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - —ç—Ç–æ –æ—à–∏–±–∫–∞
   - –ù–û —ç—Ç–æ –ù–û–†–ú–ê–õ–¨–ù–ê–Ø —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è v4.0.0!
   - –û—à–∏–±–∫–∞ –±—ã–ª–∞ –≤ `kb_domains.py` –∫–æ—Ç–æ—Ä—ã–π –æ–∂–∏–¥–∞–ª –¥—Ä—É–≥—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

---

## üí• –ü–û–ß–ï–ú–£ –≠–¢–û –ü–†–û–ë–õ–ï–ú–ê

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Git conflict –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å Shared KB:

```bash
cd docs/knowledge-base/shared
git pull origin main
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
CONFLICT (content): Merge conflict in _domain_index.yaml
```

–ê–≥–µ–Ω—Ç —Å–æ–∑–¥–∞—Å—Ç git conflict –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –∏–∑–º–µ–Ω–µ–Ω
2. Remote —Ñ–∞–π–ª –∏–º–µ–µ—Ç –¥—Ä—É–≥—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
3. Git –Ω–µ —Å–º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–ª–∏—Ç—å –∏—Ö

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—à–∏–±–∫–∞ –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ, –Ω–µ –≤ –¥–∞–Ω–Ω—ã—Ö

**–ù–∞—Å—Ç–æ—è—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```python
# File: tools/kb_domains.py, line 415
for domain_name, data in sorted(index.get('domains', {}).items(),
                               key=lambda x: x[1]['entries'], reverse=True):
                            ^^^^^^^^^^^^^^^
TypeError: 'int' object is not subscriptable
```

**–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**
- –ö–æ–¥ –æ–∂–∏–¥–∞–µ—Ç: `domains: {docker: {entries: 11}}`
- –†–µ–∞–ª—å–Ω–æ—Å—Ç—å: `domains: {docker: 11}` (–ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ!)
- –ö–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å `11['entries']` - —á—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å `kb_domains.py` —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–æ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- –ù–ï –∏–∑–º–µ–Ω—è—Ç—å `_domain_index.yaml`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ v4.0.0

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ v4.0.0:**
```yaml
# _domain_index.yaml (–æ—Ä–∏–≥–∏–Ω–∞–ª –∏–∑ Shared KB v4.0.0)
version: "2.0"
last_updated: "2026-01-07"
domains:
  docker: 11
  postgresql: 8
  testing: 11
```

**–ß—Ç–æ —Å–¥–µ–ª–∞–ª –∞–≥–µ–Ω—Ç:**
```yaml
# –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç–æ–º
domains:
  docker:
    entries: 11
    token_estimate: 2000  # ‚ùå –ù–µ—Ç –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
    tags: [...]           # ‚ùå –ù–µ—Ç –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
    description: "..."    # ‚ùå –ù–µ—Ç –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
```

---

## üìã –ß—Ç–æ –î–û–õ–ñ–ï–ù –±—ã–ª —Å–¥–µ–ª–∞—Ç—å –∞–≥–µ–Ω—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–∞–≤–∏–ª—å–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É

```python
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
1. kb_domains.py list –ø–∞–¥–∞–µ—Ç —Å TypeError
2. –û—à–∏–±–∫–∞: 'int' object is not subscriptable
3. –ü—Ä–∏—á–∏–Ω–∞: –∫–æ–¥ –æ–∂–∏–¥–∞–µ—Ç dict, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç int
4. –†–µ—à–µ–Ω–∏–µ: –ò–°–ü–†–ê–í–ò–¢–¨ kb_domains.py, –∞ –Ω–µ –¥–∞–Ω–Ω—ã–µ
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ, –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è—è

```
‚ùå "–û—à–∏–±–∫–∞ –≤ _domain_index.yaml (–ø–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)"
‚úÖ "–û—à–∏–±–∫–∞ –≤ kb_domains.py - –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ñ–æ—Ä–º–∞—Ç–æ–º _domain_index.yaml"
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π Shared KB

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ:
cd T:\Code\shared-knowledge-base
cat _domain_index.yaml

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
domains:
  docker: 11    # –ü–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - —ç—Ç–æ –ù–û–†–ú–ê!
```

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–æ–≥–æ —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ

### –®–∞–≥ 1: –ê–≥–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∏–ª –≤–µ—Ä—Å–∏—é (—Å—Ç—Ä–æ–∫–∏ 14-22)
```bash
git describe --tags --abbrev=0
# v4.0.0 ‚úÖ –í–µ—Ä–Ω–æ

git log --oneline -5
# 7381f30 Docs: Update Claude Code documentation for v4.0.0 release
# 58f5a0c Release v4.0.0
# ‚úÖ –í–µ—Ä–Ω–æ
```

### –®–∞–≥ 2: –ê–≥–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∏–ª –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (—Å—Ç—Ä–æ–∫–∏ 25-29)
```bash
ls tools/kb_domains.py tools/kb_submit.py ...
# ‚úÖ –í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–∞ –º–µ—Å—Ç–µ
```

### –®–∞–≥ 3: –ê–≥–µ–Ω—Ç –∑–∞–ø—É—Å—Ç–∏–ª kb_domains.py list (—Å—Ç—Ä–æ–∫–∏ 42-53)
```bash
python tools/kb_domains.py list
# Error: TypeError: 'int' object is not subscriptable
# ‚ùå –ê–≥–µ–Ω—Ç –ø–æ–¥—É–º–∞–ª —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ _domain_index.yaml
```

### –®–∞–≥ 4: –ê–≥–µ–Ω—Ç –ü–†–û–ß–ò–¢–ê–õ _domain_index.yaml (—Å—Ç—Ä–æ–∫–∏ 55-69)
```bash
cat _domain_index.yaml | head -30
# –ü–æ–∫–∞–∑–∞–ª –ø–ª–æ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
domains:
  api: 4
  docker: 11
  postgresql: 8
```

### –®–∞–≥ 5: ‚ùå –ê–≥–µ–Ω—Ç –ò–ó–ú–ï–ù–ò–õ —Ñ–∞–π–ª (—Å—Ç—Ä–æ–∫–∏ 73-129)
```diff
- domains:
-   api: 4
-   docker: 11
+ domains:
+   api:
+     entries: 4
+     token_estimate: 800
+     tags: ["rest", "api-design"]
+     description: "..."
```

### –®–∞–≥ 6: –ê–≥–µ–Ω—Ç –∑–∞–ø—É—Å—Ç–∏–ª —Å–Ω–æ–≤–∞ - –°–¢–ê–Ø –û–®–ò–ë–ö–ê (—Å—Ç—Ä–æ–∫–∏ 130-141)
```bash
python tools/kb_domains.py list
# Error: TypeError: 'int' object is not subscriptable
# ‚ùå –¢–∞ –∂–µ —Å–∞–º–∞—è –æ—à–∏–±–∫–∞!
```

### –®–∞–≥ 7: –ê–≥–µ–Ω—Ç –¥–æ–±–∞–≤–∏–ª –ï–©–ï –ü–û–õ–Ø (—Å—Ç—Ä–æ–∫–∏ 143-198)
```yaml
+ token_estimate: 800    # –ù–µ –ø–æ–º–æ–≥–ª–æ
```

### –®–∞–≥ 8: –ê–≥–µ–Ω—Ç –¥–æ–±–∞–≤–∏–ª tags (—Å—Ç—Ä–æ–∫–∏ 212-278)
```yaml
+ tags: ["rest", "api-design"]  # –í—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### –®–∞–≥ 9: ‚úÖ –ó–ê–†–ê–ë–û–¢–ê–õ–û (—Å—Ç—Ä–æ–∫–∏ 279-283)
```bash
python tools/kb_domains.py list
# üìö Knowledge Base Domains
# ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!
```

---

## ü§î –ü–æ—á–µ–º—É —ç—Ç–æ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ?

**–ì–∏–ø–æ—Ç–µ–∑–∞:**

–í–æ–∑–º–æ–∂–Ω–æ –∞–≥–µ–Ω—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞–ø—É—Å–∫–∞–ª `python tools/kb.py index` –º–µ–∂–¥—É –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏, –∏:
1. –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏–ª—Å—è
2. kb_domains.py –Ω–∞—á–∞–ª –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. –ò–ª–∏ –∞–≥–µ–Ω—Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–ª–∏ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏

**–ù–û:**
- –í —á–∞—Ç–µ –Ω–µ—Ç —è–≤–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –∏–Ω–¥–µ–∫—Å–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ _domain_index.yaml –ù–ï –¥–æ–ª–∂–Ω—ã –≤–ª–∏—è—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É kb_domains.py
- –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –∫–æ–¥–µ kb_domains.py, –Ω–µ –≤ –¥–∞–Ω–Ω—ã—Ö

---

## üìù –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

### –ß—Ç–æ –∞–≥–µ–Ω—Ç –î–û–õ–ñ–ï–ù –±—ã–ª —Å–¥–µ–ª–∞—Ç—å:

**1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```
–û—à–∏–±–∫–∞ –≤ kb_domains.py line 415:
–û–∂–∏–¥–∞–µ—Ç: domains: {docker: {entries: 11}}
–ü–æ–ª—É—á–∞–µ—Ç: domains: {docker: 11}
–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø—Ä–∞–≤–∏—Ç—å kb_domains.py –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–æ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
```

**2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
cd T:\Code\shared-knowledge-base
cat _domain_index.yaml
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - —ç—Ç–æ –Ω–æ—Ä–º–∞
```

**3. –ù–ï –∏–∑–º–µ–Ω—è—Ç—å —Ñ–∞–π–ª—ã –≤ submodule:**
```
‚ùå –ù–ï –∏–∑–º–µ–Ω—è—Ç—å docs/knowledge-base/shared/_domain_index.yaml
‚ùå –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
```

**4. –°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É:**
```
–í–Ω–∏–º–∞–Ω–∏–µ: kb_domains.py –Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å —Ñ–æ—Ä–º–∞—Ç–æ–º _domain_index.yaml v4.0.0
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å kb_domains.py –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–æ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
```

---

## üõ†Ô∏è –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è**
```bash
cd docs/knowledge-base/shared
git checkout _domain_index.yaml
git status
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å "nothing to commit"
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)**
```bash
cd docs/knowledge-base/shared
git stash
# –°–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ç–∫—É –¥–ª—è —Å–≤–æ–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
git checkout -b local/domain-index-fix
git stash pop
# –ù–æ —ç—Ç–æ —Å–ª–æ–º–∞–µ—Ç –±—É–¥—É—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è!
```

**–í–∞—Ä–∏–∞–Ω—Ç 3: –û–±–Ω–æ–≤–∏—Ç—å Shared KB –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏**
```bash
cd docs/knowledge-base/shared
git fetch origin
git checkout origin/main
# –ü–æ–ª—É—á–∏—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é –≥–¥–µ —ç—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
```

### –î–ª—è Shared KB (—ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç):

**1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å kb_domains.py –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–æ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:**

```python
# –ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
for domain_name, data in sorted(index.get('domains', {}).items(),
                               key=lambda x: x[1]['entries'], reverse=True):
    entry_count = data['entries']

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
for domain_name, data in sorted(index.get('domains', {}).items(),
                               key=lambda x: x[1], reverse=True):
    entry_count = data if isinstance(data, int) else data.get('entries', 0)
```

**2. –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å _domain_index.yaml –¥–æ –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**

```yaml
domains:
  docker:
    entries: 11
    token_estimate: 2000
    tags: ["containers", "dockerfile"]
    description: "Docker containerization"
```

**3. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ kb.py:**

```python
# –ü—Ä–æ–≤–µ—Ä—è—Ç—å —á—Ç–æ _domain_index.yaml —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–π —Å—Ö–µ–º–µ
def validate_domain_index(index):
    for domain, data in index.get('domains', {}).items():
        if isinstance(data, int):
            # –ü–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
            continue
        elif isinstance(data, dict):
            # –í–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
            if 'entries' not in data:
                raise ValueError(f"Domain {domain} missing 'entries' field")
        else:
            raise ValueError(f"Domain {domain} has invalid type")
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è

### –ß—Ç–æ –¥—É–º–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
‚ùå "–ê–≥–µ–Ω—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –≤—Å–µ –¥–æ–º–µ–Ω—ã –≤ –º–æ–π –ø—Ä–æ–µ–∫—Ç"
‚ùå "–ê–≥–µ–Ω—Ç –∏–∑–º–µ–Ω–∏–ª –∫–æ–¥ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π"

### –ß—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ:
‚úÖ –î–æ–º–µ–Ω—ã —É–∂–µ –±—ã–ª–∏ —Ç–∞–º –ø–æ—Å–ª–µ git checkout v4.0.0
‚ùå –ê–≥–µ–Ω—Ç –ò–ó–ú–ï–ù–ò–õ —Ñ–∞–π–ª –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–µ–∫—Ç–µ
‚ùå –ê–≥–µ–Ω—Ç –¥–æ–±–∞–≤–∏–ª –ø–æ–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ:
1. Git checkout v4.0.0 ‚Üí –ø–æ–ª—É—á–∏–ª–∏ –≤—Å–µ —Ñ–∞–π–ª—ã Shared KB
2. –ê–≥–µ–Ω—Ç –æ–±–Ω–∞—Ä—É–∂–∏–ª –æ—à–∏–±–∫—É –≤ kb_domains.py
3. ‚ùå –ê–≥–µ–Ω—Ç –ò–ó–ú–ï–ù–ò–õ _domain_index.yaml –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥
4. ‚ùå –ê–≥–µ–Ω—Ç —Å–æ–∑–¥–∞–ª –±—É–¥—É—â–∏–π git conflict

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–æ–µ–∫—Ç–æ–≤:

1. **–ù–ï –¥–æ–≤–µ—Ä—è—Ç—å –∞–≥–µ–Ω—Ç–∞–º –∏–∑–º–µ–Ω—è—Ç—å —Ñ–∞–π–ª—ã –≤ submodule**
   - Submodule –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å read-only
   - –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ upstream —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

2. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å —á—Ç–æ –∏–∑–º–µ–Ω—è–µ—Ç –∞–≥–µ–Ω—Ç**
   ```bash
   git status
   git diff
   ```

3. **–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö:**
   - –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - –°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ upstream
   - –ù–µ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

### –î–ª—è Shared KB (—ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç):

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å kb_domains.py** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å v4.0.0 —Ñ–æ—Ä–º–∞—Ç–æ–º
2. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ _domain_index.yaml
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å** –æ–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –≤ CHANGELOG
4. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É** –≤ kb.py index --validate

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –ü–†–ê–í–ò–õ–¨–ù–û –≤ —Ç–æ–º —á–∞—Ç–µ

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ (git describe --tags)
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (ls tools/*.py)
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (CHANGELOG.md)
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∏—Å–∫–∞ (kb.py search "test")
5. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –æ –º–∏–≥—Ä–∞—Ü–∏–∏

## ‚ùå –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û

1. ‚ùå –ò–ó–ú–ï–ù–ï–ù–ò–ï —Ñ–∞–π–ª–∞ –≤ submodule (_domain_index.yaml)
2. ‚ùå –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã (–∫–æ–¥ vs –¥–∞–Ω–Ω—ã–µ)
4. ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –±—É–¥—É—â–µ–≥–æ git conflict
5. ‚ùå –ù–µ–ø–æ–Ω–∏–º–∞–Ω–∏–µ —á—Ç–æ –ø–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - —ç—Ç–æ –Ω–æ—Ä–º–∞ v4.0.0

---

**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ Shared KB
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
**–†–∏—Å–∫:** –°—Ä–µ–¥–Ω–∏–π (–±—É–¥—É—â–∏–µ git conflicts)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å kb_domains.py –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–æ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
2. –û—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
