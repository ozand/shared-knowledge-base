version: '1.0'
category: claude-code
last_updated: '2026-01-07'
patterns:
- id: MODULAR-SKILLS-001
  title: Modular Skills Pattern (500-Line Rule)
  severity: high
  scope: universal
  problem: 'Claude Code skills can grow large and unwieldy, causing:

    - High token usage at session start

    - Slow session initialization

    - Difficult maintenance

    - Poor organization

    - Mixed content (essentials + details)


    Need a pattern to keep skills focused, organized, and token-efficient

    while maintaining comprehensive content availability.

    '
  symptoms:
  - SKILL.md files exceeding 500 lines
  - Session start >3,000 tokens
  - Hard to find information in large files
  - Duplication of content
  - No clear separation between essential and detailed content
  root_cause: 'No established pattern for organizing skill content.

    All content loaded at once, mixing essential information with

    detailed explanations, examples, and reference material.

    '
  solution:
    code: "# Modular Skills Pattern: 500-Line Rule\n# Core principle: SKILL.md <500\
      \ lines, details in resources/\n\n# Before (monolithic):\n# .claude/skills/python-async/SKILL.md\
      \ (650 lines)\n#\n# ## Quick Start (50 lines)\n# ## Core Concepts (100 lines)\n\
      # ## Async Patterns (400 lines) âš ï¸ Too large\n# ## Error Handling (200 lines)\
      \ âš ï¸ Too large\n#\n# Total: 650 lines (~4,900 tokens)\n# Loaded: Always (at\
      \ session start)\n\n# After (modular):\n# .claude/skills/python-async/SKILL.md\
      \ (280 lines)\n#\n# ## Quick Start (50 lines)\n# ## Core Concepts (100 lines)\n\
      # ## Async Patterns (50 lines)\n#   **\U0001F4D8 Complete Patterns:** @resources/async-patterns.md\n\
      # ## Error Handling (50 lines)\n#   **\U0001F4D8 Complete Guide:** @resources/error-handling.md\n\
      # ## Testing (30 lines)\n#   **\U0001F4D8 Testing Guide:** @resources/testing.md\n\
      #\n# Total: 280 lines (~2,100 tokens)\n# Loaded: On-demand (when skill activated)\n\
      #\n# resources/ (on-demand, ~3,000 tokens each):\n# â”œâ”€â”€ async-patterns.md (400\
      \ lines)\n# â”œâ”€â”€ error-handling.md (350 lines)\n# â””â”€â”€ testing.md (380 lines)\n\
      \n# YAML frontmatter (metadata at startup, ~50 tokens):\n---\nname: \"python-async\"\
      \ndescription: \"Python async/await patterns and coroutines\"\nversion: \"1.0\"\
      \ntags: [\"python\", \"async\", \"await\", \"coroutine\"]\nresources:\n  - \"\
      resources/async-patterns.md\"\n  - \"resources/error-handling.md\"\n  - \"resources/testing.md\"\
      \nrelated:\n  - \"@skills/python-development/SKILL.md\"\n  - \"@standards/yaml-standards.md\"\
      \n---\n\n# Token efficiency calculation:\n# Session start (metadata only): ~50\
      \ tokens\n# On-demand (full SKILL.md): ~2,100 tokens\n# Resources (when clicked):\
      \ ~3,000 tokens each\n#\n# Before: Always loaded 4,900 tokens\n# After: 50 tokens\
      \ (metadata) + 2,100 (when needed)\n# Savings: 98% at session start, 57% when\
      \ activated\n\n# Content distribution strategy:\n# SKILL.md (300-500 lines):\n\
      #   - Quick start (50 lines) - Essential commands\n#   - Core concepts (100\
      \ lines) - Main ideas\n#   - Common tasks (100 lines) - Frequent workflows\n\
      #   - Essential examples (50 lines) - Key patterns\n#   - Links to resources\
      \ (10 lines) - @ references\n#   - Related skills (40 lines) - Cross-references\n\
      #   - Quick troubleshooting (50 lines) - Common issues\n#\n# resources/ (unlimited,\
      \ on-demand):\n#   - In-depth explanations (200-400 lines each)\n#   - Comprehensive\
      \ examples (100-200 lines each)\n#   - Edge cases and advanced topics (150-250\
      \ lines each)\n#   - Reference documentation (100-150 lines each)\n\n# When\
      \ to create resources/:\n# 1. Section >100 lines in SKILL.md\n# 2. Detailed\
      \ explanation not needed for 80% of use cases\n# 3. Multiple examples for same\
      \ concept\n# 4. Reference documentation needed\n# 5. Edge cases and advanced\
      \ topics\n\n# Linking syntax:\n# In SKILL.md:\n# **\U0001F4D8 Detailed Patterns:**\
      \ `@resources/async-patterns.md`\n# **\U0001F4D8 Complete Guide:** `@resources/error-handling.md`\n\
      # **\U0001F4D8 YAML Standards:** `@standards/yaml-standards.md`\n"
    explanation: 'The Modular Skills Pattern (500-Line Rule) provides a standardized

      approach to organizing skill content for token efficiency and

      maintainability.


      **Core principle:**

      - SKILL.md: 300-500 lines (core content only)

      - resources/: Detailed content (on-demand loading)

      - Progressive disclosure: Metadata at startup (~50 tokens)


      **Benefits:**

      1. **Token efficiency:** 70%+ savings at session start

      2. **Better organization:** Clear separation of concerns

      3. **Improved maintainability:** Smaller, focused files

      4. **Enhanced UX:** Essentials first, details on-demand

      5. **Scalability:** Works for large projects


      **Implementation:**

      1. Measure SKILL.md line count

      2. Identify sections >100 lines

      3. Create resources/ directory

      4. Move large sections to resources/

      5. Add @ links in SKILL.md

      6. Update YAML frontmatter

      7. Test links and loading


      **Quality targets:**

      - Session start: <500 tokens (metadata only)

      - SKILL.md: 300-500 lines

      - Resources: 300-500 lines each (unlimited)

      - Progressive disclosure: 100% coverage

      '
  examples:
  - name: research-enhance skill split
    description: Split 419-line skill into modular structure
    before: 'research-enhance/SKILL.md: 419 lines

      - Enhancement workflow

      - What Claude can do (detailed)

      - Research sources (detailed)

      - Enhancement examples (detailed)

      '
    after: 'research-enhance/SKILL.md: 259 lines (-38%)

      - Enhancement workflow (condensed)

      - What Claude can do (examples)

      - **ðŸ“˜ Research Sources:** @resources/research-sources.md

      - **ðŸ“˜ Examples:** @resources/enhancement-examples.md


      resources/ (752 lines - on-demand):

      â”œâ”€â”€ research-sources.md (339 lines)

      â””â”€â”€ enhancement-examples.md (413 lines)

      '
    result: 'Session start: 98% token savings (50 vs 3,140 tokens)'
  - name: Command optimization
    description: Reduce kb-query command from 391 to 115 lines
    before: 'commands/kb-query.md: 391 lines

      - Verbose descriptions

      - Detailed examples

      - Complete workflow

      '
    after: 'commands/kb-query.md: 115 lines (-71%)

      - Concise descriptions

      - Quick examples

      - **ðŸ“˜ Complete Workflow:** @references/workflows.md

      - **ðŸ“˜ CLI Reference:** @references/cli-reference.md

      '
    result: 70% reduction, links to detailed documentation
  - name: CLAUDE.md optimization
    description: Reduce from 412 to 215 lines
    before: 'CLAUDE.md: 412 lines

      - Large documentation sections

      - Detailed workflows

      - Complete CLI reference

      '
    after: 'CLAUDE.md: 215 lines (-48%)

      - Essential quick start

      - Condensed overview

      - Links to references/

      - **ðŸ“˜ Complete Guide:** @for-claude-code/README.md

      '
    result: 48% reduction, progressive disclosure applied
  benefits:
  - Token efficiency: 70%+ savings at session start
  - Better organization: Clear content structure
  - Improved maintainability: Smaller files
  - Enhanced UX: Essentials first, details on-demand
  - Scalability: Works for large projects
  - Single source of truth: No duplication
  prevention:
  - Apply 500-line rule to all skills (SKILL.md <500 lines)
  - Move sections >100 lines to resources/
  - Add YAML frontmatter to all skills
  - Use @ references for detailed content
  - Keep CLAUDE.md to ~300 lines
  - 'Measure line counts: wc -l SKILL.md'
  - Test that @ links work correctly
  - Apply progressive disclosure consistently
  tags:
  - claude-code
  - skills
  - modular
  - token-efficiency
  - progressive-disclosure
  related_patterns:
  - CLAUDE-CODE-AUTO-ACTIVATION-001
  - SKILL-RULES-JSON-001
  - HOOK-PATTERNS-001
  - PROGRESSIVE-DISCLOSURE-001
  domains:
    primary: authentication
    secondary: []
